# witch-market
## Запуск
В основной директории создать .env и заполнить по шаблону **(пока что порты для серверов сделать 8081 - OMS и 8082 - AS)**.  
Установить shared-lib с помощью `mvn clean install` из директории модуля, собрать сервисы с помощью `mvn clean package`
Далее из этой же директории выполнить `docker compose up -d`.  
Для теста можно выполнить post запрос на orders/ с содержимым:
```
Составной заказ:
{
    "pipelineId": 1,
    "clientId": "2db94bca-5ef3-467b-811d-a2496b0169ac"
}

Одноэтапный заказ:
{
    "pipelineId": 4,
    "clientId": "2db94bca-5ef3-467b-811d-a2496b0169ac"
}
```
И просмотреть логи серверов и состояние очередей в kafka-ui
## Что реализовано в настоящий момент
Система состоит из двух сервисов, взаимодействующих через Kafka. OMS принимает заказы через REST API, сохраняет их в PostgreSQL и отправляет задачи в Kafka. Специализированные сервисы (пока что только Artifact Service) обрабатывают задачи, обновляют статусы в БД и отправляют результаты обратно в Kafka. OMS отслеживает выполнение задач и обновляет статусы заказов, отправляет результаты в нужные очереди.
